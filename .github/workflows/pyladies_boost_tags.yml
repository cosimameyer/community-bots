name: Boost posts that the tag pyladies

on:
    schedule:
    - cron: '5 */6 * * *' #'0 */12 * * *' 

jobs:
    build:
        runs-on: ubuntu-latest
        steps:
        - name: checkout repo content
          uses: actions/checkout@v2 # checkout the repository content

        - name: setup python
          uses: actions/setup-python@v4
          with:
            python-version: '3.9.16' # install the python version needed

        - name: install python packages
          run: |
            python -m pip install --upgrade pip
            pip install -r requirements.txt

        - name: Execute Python script for Mastodon ðŸ¦£
          env:
            PLATFORM: "mastodon"
            CLIENT_NAME: "pyladies_bot"
            ACCESS_TOKEN: ${{ secrets.ACCESS_TOKEN_PYLADIES }}
            CLIENT_ID: ${{ secrets.CLIENT_ID_PYLADIES }}
            CLIENT_SECRET: ${{ secrets.CLIENT_SECRET_PYLADIES }}
            PASSWORD: ${{ secrets.PASSWORD_PYLADIES }}
            USERNAME: ${{ secrets.USERNAME_PYLADIES }}
            RLADIES_BOT_CLIENTCRED_SECRET: ${{ secrets.PYLADIES_BOT_CLIENTCRED_SECRET }}
            TAGS_TO_BOOST: "pyladies"
          run: python src/boost_tags.py
        
        - name: Execute Python script for Bluesky ðŸ¦‹
          env:
            PLATFORM: "bluesky"
            CLIENT_NAME: "pyladies_bot"
            PASSWORD: ${{ secrets.BSKY_PYLADIES }}
            USERNAME: ${{ secrets.BSKY_USERNAME_PYLADIES }}
            TAGS_TO_BOOST: "pyladies"
          run: python src/boost_tags.py
